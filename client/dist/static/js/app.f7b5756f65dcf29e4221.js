webpackJsonp([1],{"/yRs":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("diQi"),n=a.n(i),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vue-street-view-pano-container"},[t("div",{ref:"vue-street-view-pano",staticClass:"vue-street-view-pano"}),this._v(" "),this._t("default")],2)},staticRenderFns:[]},r=function(e){a("Y/hG")},o=a("VU/8")(n.a,s,!1,r,null,null);t.default=o.exports},"2LX0":function(e,t,a){e.exports=a.p+"static/img/alert.ff78e2c.png"},"5ZbH":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("kXiA"),n=a.n(i),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vue-map-container"},[t("div",{ref:"vue-map",staticClass:"vue-map"}),this._v(" "),t("div",{staticClass:"vue-map-hidden"},[this._t("default")],2),this._v(" "),this._t("visible")],2)},staticRenderFns:[]},r=function(e){a("Fi9F")},o=a("VU/8")(n.a,s,!1,r,null,null);t.default=o.exports},"5cLx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Vj7G"),n=a.n(i),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{ref:"flyaway"},[this._t("default")],2)])},staticRenderFns:[]},r=a("VU/8")(n.a,s,!1,null,null,null);t.default=r.exports},Fi9F:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},s=a("VU/8")({name:"app"},n,!1,function(e){a("l4ex")},null,null).exports,r=a("/ocq"),o=a("mvHQ"),l=a.n(o),c=a("7t+N"),u=a.n(c),p={name:"HelloWorld",data:function(){return{places:null,msg:"Welcome to Your Vue.js App",video:null,already:!1,warn:!1,nearImage:"",apiFirstAccess:0,alertType:0}},methods:{cancelAlert:function(){this.alertType=0},notify:function(){"default"===Notification.permission&&Notification.requestPermission(),Notification("危険運転を検知しました。")},getMapPosition:function(e){console.log(e.latLng.lat(),e.latLng.lng())},circleClick:function(){var e=this;this.alertType=3,setTimeout(function(){e.alertType=0},3e3)},getNearMisses:function(){var e=this;u.a.get("/static/near-misses.json",function(t){e.places=t.result.list.map(function(e,t){return{lat:1*e.latitude,lng:1*e.longitude}}).filter(function(e,t){return t>0}),console.log(e.places)})},camera:function(){var e=this;if(!this.already){this.already=!0;var t=document.querySelector("#video");navigator.getUserMedia({video:!0,audio:!1},function(e){console.log(e),t.src=window.URL.createObjectURL(e)},function(e){console.log("video",e)}),setInterval(function(){e.cameraImage()},1e3)}},cameraImage:function(){var e=this,t=document.querySelector("#video"),a=document.querySelector("#canvas"),i=a.getContext("2d"),n=t.offsetWidth,s=t.offsetHeight;a.setAttribute("width",n),a.setAttribute("height",s),i.drawImage(t,0,0,n,s);var r=a.toDataURL("image/jpeg");u.a.ajax({type:"POST",url:"https://yahoohack2017.herokuapp.com/api/detect",contentType:"application/json",dataType:"json",data:l()({image:r})}).done(function(t){e.apiFirstAccess<5?e.apiFirstAccess+=1:(e.alertType="near"===t.predict?1:0,console.log("ok",t.predict,e.alertType))})}},mounted:function(){this.getNearMisses();var e=0;requestAnimationFrame(function t(){u()("body, html").scrollTop(e),e=0===e?50:0,requestAnimationFrame(t)}),this.camera()}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hello",on:{click:e.cancelAlert}},[i("video",{staticClass:"video",attrs:{id:"video"}}),e._v(" "),i("gmap-map",{staticClass:"map",staticStyle:{width:"600px",height:"600px"},attrs:{center:{lng:139.747667,lat:35.702193},zoom:11},on:{click:e.getMapPosition}},e._l(e.places,function(t,a){return i("div",[i("gmap-marker",{key:a,attrs:{position:t,clickable:!0}}),e._v(" "),i("gmap-circle",{attrs:{center:t,position:t,fillColor:"#ff0000",fillOpacity:.5,radius:500,strokeColor:"#ff0000",strokeOpacity:0,clickable:!0},on:{click:e.circleClick}})],1)})),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"image"}}),e._v(" "),i("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"canvas"}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.alertType>0,expression:"alertType > 0"}],staticClass:"alert"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.alertType,expression:"alertType === 1"}]},[i("img",{attrs:{src:a("2LX0")}}),e._v(" "),e._m(0,!1,!1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.alertType,expression:"alertType === 2"}]},[i("img",{attrs:{src:a("2LX0")}}),e._v(" "),e._m(1,!1,!1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3===e.alertType,expression:"alertType === 3"}]},[i("img",{attrs:{src:a("2LX0")}}),e._v(" "),e._m(2,!1,!1)])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("あおり運転を検知しました"),t("br"),this._v("\n      後方の車両に注意してください")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("集中度が低いです"),t("br"),this._v("\n      運転を止めて休憩してください（仮）\n      ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("１分後は危険度が高い地点です"),t("br"),this._v("\n      走行に注意してください\n      ")])}]},v=a("VU/8")(p,d,!1,function(e){a("gB48")},"data-v-3bb3efc5",null).exports,f={name:"HelloWorld",data:function(){return{image:"",notifyVar:null}},methods:{notify:function(){"default"===Notification.permission&&Notification.requestPermission(),this.notifyVar=new Notification("危険運転を検知しました。")},report:function(){u.a.ajax({type:"POST",url:"https://yahoohack2017.herokuapp.com/api/reckless_driving/report",contentType:"application/json",dataType:"json",data:l()({images:[this.image]})}).done(function(e){alert("通報しました"),location.reload()})}},mounted:function(){var e=this;setInterval(function(){var t=localStorage.getItem("car-image");t&&(localStorage.removeItem("car-image"),e.image=t,e.notify())},2e3)}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hello"},[t("div",{staticClass:"button",on:{click:this.report}},[this._v("通報する")]),this._v(" "),t("img",{attrs:{src:this.image}})])},staticRenderFns:[]},m=a("VU/8")(f,h,!1,function(e){a("yBbJ")},"data-v-12d823b0",null).exports;i.a.use(r.a);var _=new r.a({routes:[{path:"/",name:"HelloWorld",component:v},{path:"/report",name:"Report",component:m}]}),g=a("sA6N");i.a.config.productionTip=!1,i.a.use(g,{load:{key:"AIzaSyAbNtOod3x4x5zu6QAQgUdzrVIp76zLDGM",libraries:"places"}}),new i.a({el:"#app",router:_,template:"<App/>",components:{App:s}})},"Y/hG":function(e,t){},YI6p:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("jIen"),n=a.n(i),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("label",[t("span",{domProps:{textContent:this._s(this.label)}}),this._v(" "),t("input",{ref:"input",class:this.className,attrs:{type:"text",placeholder:this.placeholder}})])},staticRenderFns:[]},r=a("VU/8")(n.a,s,!1,null,null,null);t.default=r.exports},gB48:function(e,t){},l4ex:function(e,t){},preG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("osty"),n=a.n(i),s={render:function(){var e=this.$createElement;return(this._self._c||e)("input",{ref:"input",attrs:{type:"text",placeholder:this.placeholder},domProps:{value:this.value}})},staticRenderFns:[]},r=a("VU/8")(n.a,s,!1,null,null,null);t.default=r.exports},yBbJ:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f7b5756f65dcf29e4221.js.map